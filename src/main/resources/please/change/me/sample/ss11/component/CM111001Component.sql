-- 交通費申請履歴登録
REGISTER_HISTORY=
INSERT INTO
    TRANS_EXPE_APPLI_HISTORY
    (
    TRANS_EXPE_APPLI_HISTORY_ID,
    TRANS_EXPE_APPLI_ID,
    EXECUTIONER_ID,
    EXECUTION_DATE_TIME,
    TRANS_EXPE_APPLI_ACTION_CD,
    TRANS_EXPE_APPLI_RESULT_CD,
    HISTORY_COMMENT
    )
VALUES
    (
    :transExpeAppliHistoryId,
    :transExpeAppliId,
    :executionerId,
    :executionDateTime,
    :transExpeAppliActionCd,
    :transExpeAppliResultCd,
    :historyComment
    )
    
-- 交通費申請登録
REGISTER_TRANS_EXPENSE_APPLICATION=
INSERT INTO
    TRANS_EXPE_APPLICATION
    (
    TRANS_EXPE_APPLI_ID,
    WF_INSTANCE_ID,
    TRANS_EXPE_APPLI_STATUS_CD,
    TRANS_DEVICE_CD,
    DEPARTURE,
    DESTINATION,
    TRANS_EXPENSE,
    CONFIRM_USER_ID,
    AUTHORIZE_USER_ID,
    INSERT_USER_ID,
    INSERT_DATE_TIME
    )
VALUES
    (
    :transExpeAppliId,
    :wfInstanceId,
    :transExpeAppliStatusCd,
    :transDeviceCd,
    :departure,
    :destination,
    :transExpense,
    :confirmUserId,
    :authorizeUserId,
    :insertUserId,
    :insertDateTime
    )
    
-- 交通費申請更新
UPDATE_TRANS_EXPENSE_APPLICATION=
UPDATE
    TRANS_EXPE_APPLICATION
SET
    TRANS_EXPE_APPLI_STATUS_CD = :transExpeAppliStatusCd,
    TRANS_DEVICE_CD = :transDeviceCd,
    DEPARTURE = :departure,
    DESTINATION = :destination,
    TRANS_EXPENSE = :transExpense,
    CONFIRM_USER_ID = :confirmUserId,
    AUTHORIZE_USER_ID = :authorizeUserId
WHERE
    TRANS_EXPE_APPLICATION.TRANS_EXPE_APPLI_ID = :transExpeAppliId

-- 交通費申請ステータス更新
UPDATE_TRANS_EXPENSE_APPLI_STATUS=
UPDATE
    TRANS_EXPE_APPLICATION
SET
    TRANS_EXPE_APPLI_STATUS_CD = :transExpeAppliStatusCd
WHERE
    TRANS_EXPE_APPLICATION.TRANS_EXPE_APPLI_ID = :transExpeAppliId
    
-- 交通費申請取得
GET_TRANS_EXPENSE_APPLICATION=
SELECT
    APPLICATION.TRANS_EXPE_APPLI_ID,
    APPLICATION.WF_INSTANCE_ID,
    APPLICATION.TRANS_EXPE_APPLI_STATUS_CD,
    APPLICATION.TRANS_DEVICE_CD,
    APPLICATION.DEPARTURE,
    APPLICATION.DESTINATION,
    APPLICATION.TRANS_EXPENSE,
    APPLICATION.CONFIRM_USER_ID,
    APPLICATION.AUTHORIZE_USER_ID,
    CONFIRM_USER.KANJI_NAME CONFIRM_USER_KANJI_NAME,
    AUTHORIZE_USER.KANJI_NAME AUTHORIZE_USER_KANJI_NAME
FROM
    TRANS_EXPE_APPLICATION APPLICATION
INNER JOIN
    USERS CONFIRM_USER
ON
    APPLICATION.CONFIRM_USER_ID = CONFIRM_USER.USER_ID
INNER JOIN
    USERS AUTHORIZE_USER
ON
    APPLICATION.AUTHORIZE_USER_ID = AUTHORIZE_USER.USER_ID
WHERE
    APPLICATION.TRANS_EXPE_APPLI_ID = ?