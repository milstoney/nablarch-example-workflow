<?xml version="1.0" encoding="UTF-8"?>
<component-configuration
        xmlns="http://tis.co.jp/nablarch/component-configuration"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://tis.co.jp/nablarch/component-configuration  /component-configuration.xsd">

  <config-file file="classpath:nablarch/tool/formgenerator/loader/poi/formgeneratorFromTableDesign.config"/>

  <!-- テーブル定義 -->
  <component name="tableDefinitionLoader"
             class="nablarch.tool.formgenerator.loader.poi.TableDefinitionLoader">
    <property name="pathToBook" value="${tableDefinitionFilePath}"/>
    <!-- データ読み取り開始行 -->
    <property name="startRowIndex" value="10"/>
    <property name="columnDefs" ref="tableDefinitionColumnDefs"/>
    <!-- テーブル論理名を記載したセル位置（0オリジン） -->
    <property name="logicalTableNameRowIndex" value="4"/>
    <property name="logicalTableNameColumnIndex" value="5"/>
    <!-- テーブル物理名を記載したセル位置（0オリジン） -->
    <property name="physicalTableNameRowIndex" value="4"/>
    <property name="physicalTableNameColumnIndex" value="22"/>
  </component>

  <!-- テーブル定義シート -->
  <component name="tableDefinitionColumnDefs"
             class="nablarch.tool.util.poi.XlsColumnDefs">
    <property name="indexNamePairs">
      <map>
        <entry key="1" value="logicalName"/>
        <entry key="6" value="physicalName"/>
        <entry key="11" value="domainName"/>
        <entry key="16" value="dataTypeName"/>
        <entry key="24" value="required"/>
      </map>
    </property>
  </component>


  <!-- ドメイン定義 -->
  <component name="domainDefinitionLoader"
             class="nablarch.tool.formgenerator.loader.poi.DomainDefinitionLoader">
    <!-- 入力元ファイルのパス -->
    <property name="pathToBook" value="${domainDefinitionFilePath}"/>
    <!-- 読み込み対象シート名 -->
    <property name="sheetName" value="ドメイン定義"/>
    <!-- 読み取り開始行（0オリジン） -->
    <property name="startRowIndex" value="5"/>
    <!-- Excelファイルのレイアウト -->
    <property name="columnDefs" ref="domainDefinitionColumnDefs"/>
    <!-- データタイプ定義のローダ -->
    <property name="dataTypeDefinitionLoader" ref="dataTypeDefinitionLoader"/>
  </component>

  <!-- ドメイン定義書のレイアウト -->
  <component name="domainDefinitionColumnDefs"
             class="nablarch.tool.util.poi.XlsColumnDefs">
    <property name="indexNamePairs">
      <map>
        <!-- ドメイン名(論理) -->
        <entry key="0" value="domainLogicalName"/>
        <!-- 意味・説明 -->
        <entry key="5" value="description"/>
        <!-- データタイプ -->
        <entry key="14" value="dataTypeName"/>
        <!-- 桁数( '=' or '=<' ) -->
        <entry key="17" value="eqOrLe"/>
        <!-- 桁数 -->
        <entry key="18" value="precision"/>
        <!-- 小数部桁数 -->
        <entry key="20" value="fraction"/>
        <!-- データタイプ詳細 -->
        <entry key="22" value="dataTypeDetail"/>
      </map>
    </property>
  </component>

  <!-- データタイプ定義 -->
  <component name="dataTypeDefinitionLoader"
             class="nablarch.tool.formgenerator.loader.poi.DataTypeDefinitionLoader">
    <property name="pathToBook" value="${domainDefinitionFilePath}"/>
    <property name="sheetName" value="データタイプ定義"/>
    <property name="startRowIndex" value="3"/>
    <property name="columnDefs" ref="dataTypeDefinitionColumnDefs"/>
    <property name="validationDefinitionLoader" ref="validationDefinitionLoader"/>
  </component>
  <!-- データタイプ定義シートのレイアウト -->
  <component name="dataTypeDefinitionColumnDefs"
             class="nablarch.tool.util.poi.XlsColumnDefs">
    <property name="indexNamePairs">
      <map>
        <entry key="0" value="dataTypeName"/>
        <entry key="1" value="lengthValidationName"/>
        <entry key="2" value="dataTypeValidationName"/>
        <entry key="3" value="argName1"/>
        <entry key="4" value="argValue1"/>
        <entry key="5" value="argName2"/>
        <entry key="6" value="argValue2"/>
        <entry key="7" value="argName3"/>
        <entry key="8" value="argValue3"/>
        <entry key="9" value="argName4"/>
        <entry key="10" value="argValue4"/>
        <entry key="11" value="argName5"/>
        <entry key="12" value="argValue5"/>
      </map>
    </property>
  </component>

  <!-- 精査処理定義 -->
  <component name="validationDefinitionLoader"
             class="nablarch.tool.formgenerator.loader.poi.ValidationDefinitionLoader">
    <property name="pathToBook" value="${domainDefinitionFilePath}"/>
    <property name="sheetName" value="精査処理定義"/>
    <property name="startRowIndex" value="2"/>
    <property name="columnDefs" ref="validationDefinitionColumnDefs"/>
  </component>
  <!-- 精査処理定義シートのレイアウト -->
  <component name="validationDefinitionColumnDefs"
             class="nablarch.tool.util.poi.XlsColumnDefs">
    <property name="indexNamePairs">
      <map>
        <entry key="0" value="validationName"/>
        <entry key="1" value="annotationPhysicalName"/>
        <entry key="2" value="arg1"/>
        <entry key="3" value="arg2"/>
        <entry key="4" value="arg3"/>
        <entry key="5" value="arg4"/>
        <entry key="6" value="arg5"/>
        <entry key="7" value="annotationFqcn"/>
      </map>
    </property>
  </component>

  <!-- コード設計書ロード設定 -->
  <component name="codeLoader" class="nablarch.tool.formgenerator.loader.poi.CodeLoader">
    <property name="pathToBook" value="${codeDesignFilePath}"/>
    <property name="sheetName" value="ja"/>
    <property name="startRowIndex" value="11"/>
    <property name="columnDefs" ref="codeColumnDefs"/>
  </component>
  <!-- コード設計書のレイアウト -->
  <component name="codeColumnDefs"
             class="nablarch.tool.util.poi.XlsColumnDefs">
    <property name="indexNamePairs">
      <map>
        <entry key="0" value="codeId"/>
        <entry key="2" value="codeName"/>
        <entry key="6" value="description"/>
        <entry key="12" value="codeValue"/>
        <entry key="13" value="sortOrder"/>
        <entry key="14" value="name"/>
      </map>
    </property>
  </component>

  <!-- Java-DBデータ型対応表 -->
  <component name="dataTypeMapping" class="nablarch.tool.formgenerator.helper.DataTypeMapping">
    <property name="mapping">
      <map>
        <entry key="NCHAR" value="java.lang.String"/>
        <entry key="NVARCHAR2" value="java.lang.String"/>
        <entry key="NUMBER" value="java.math.BigDecimal"/>
        <entry key="TIMESTAMP" value="java.sql.Timestamp"/>
      </map>
    </property>
  </component>

  <!-- フォーム自動生成クラス -->
  <component name="formGenerator"
             class="nablarch.tool.formgenerator.helper.FormGenerator">
    <!-- 使用するテンプレート -->
    <property name="templatePath" value="classpath:nablarch/tool/formgenerator/class_template.txt"/>
    <property name="tableDefinitionLoader" ref="tableDefinitionLoader"/>
    <property name="importBlock" ref="importBlock"/>
    <property name="fieldBlock" ref="fieldBlock"/>
    <property name="constructorBlock" ref="constructorBlock"/>
    <property name="accessorBlock" ref="accessorBlock"/>
    <property name="packageName" value="${packageName}"/>
    <property name="outputDir" value="${outputDir}"/>

  </component>

  <!-- インポート部 -->
  <component name="importBlock"
             class="nablarch.tool.formgenerator.helper.ImportBlock"/>

  <!-- フィールド部 -->
  <component name="fieldBlock"
             class="nablarch.tool.formgenerator.helper.FieldBlock">
    <property name="templatePath" value="classpath:nablarch/tool/formgenerator/field_template.txt"/>
    <property name="fieldAnnotation" ref="fieldAnnotationBlock">
    </property>
  </component>

  <!-- フィールドに付与するアノテーション -->
  <component name="fieldAnnotationBlock"
             class="nablarch.tool.formgenerator.helper.FieldAnnotation">
    <property name="annotationMapping">
      <map>
        <entry key="INSERT_USER_ID" value="@UserId"/>
        <entry key="INSERT_DATE_TIME" value="@CurrentDateTime"/>
        <entry key="UPDATE_USER_ID" value="@UserId"/>
        <entry key="UPDATE_DATE_TIME" value="@CurrentDateTime"/>
        <entry key="EXECUTIONER_ID" value="@UserId"/>
        <entry key="EXECUTIN_DATE_TIME" value="@CurrentDateTime"/>
      </map>
    </property>
  </component>


  <!-- コンストラクタ部 -->
  <component name="constructorBlock"
             class="nablarch.tool.formgenerator.helper.ConstructorBlock">
    <property name="templatePath" value="classpath:nablarch/tool/formgenerator/constructor_assign_template.txt"/>

  </component>

  <!-- アクセサ部 -->
  <component name="accessorBlock"
             class="nablarch.tool.formgenerator.helper.AccessorBlock">
    <property name="templatePath" value="classpath:nablarch/tool/formgenerator/accessor_template.txt"/>
    <property name="propertyNameAnnotation" ref="propertyNameAnnotation"/>
  </component>
  
    <!-- PropertyNameアノテーション部（messageIdアノテーションを使用） -->
  <component name="propertyNameAnnotation"
      class="nablarch.tool.formgenerator.helper.PropertyNameAnnotation">
    <property name="templatePath" value="classpath:nablarch/tool/formgenerator/property_name_annotation_template.txt"/>
  </component>

  <!-- ソース出力各種設定 -->
  <component class="nablarch.tool.formgenerator.helper.util.FormGenSettings"
             name="formGenSettings">
    <property name="templateEncoding" value="${templateEncoding}"/>
    <property name="outputEncoding" value="${outputEncoding}"/>
    <property name="lineSeparator" value="${lineSeparator}"/>
    <property name="spaceSizeForIndent" value="${spaceSizeForIndent}" />
    <property name="tablePrefix" value="${tablePrefix}"/>
    <property name="classSuffix" value="${classSuffix}"/>
  </component>
</component-configuration>
